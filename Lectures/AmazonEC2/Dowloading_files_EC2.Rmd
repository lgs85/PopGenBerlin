---
title: "Downloading files from the Amazon EC2 server"
output: html_document
---

We are going to make a test file on the Amazon server and then download it to the desktop.

##Everyone
1. Log onto the Amazon server using your username and keyfile. Make sure you are in your home directory.

2. Create a new folder, and place in it a new file with some text in it

```{r, eval = F}
mkdir hello_folder
echo "hello world" > hello_folder/hello.txt
```


Our next step differs for windows and mac users. Go to the relevant section.


##Windows users
- Start up your command prompt (e.g. open windows explorer and type "cmd" into the explorer bar and press enter)

- Get the path to the directory, that contains your .ppk key file. You can do this by navigating to the folder in windows explorer, right-clicking in the address bar at the top, then selecting *copy as text* (or something similar!). You will need this path to be able to download files from the cloud.

- We will now download the `hello.txt` file to our laptop hard drives. In your terminal, type and adapt the following. You will need to change the paths below to the path that you have copied from windows explorer. You will also need to change the username physaliaXX@ec2-etc. to your own username, and the daily-changing address that we have sent you. 


```{r, eval = F}
pscp -r -i C:\Users\yourname\Documents\PopGenBerlin\physaliaXX.ppk physaliaXX@ec2-XX-XXX-XX-XXX.us-west-2.compute.amazonaws.com:\hello_folder/hello.txt C:\users\yourname\Documents\PopGenBerlin
```

- `pcsp` expects three arguments, in the correct order. i) the path to your .pkk key file (after the option "-i"), ii) the address that you wish to download from, and iii) the address that you wish to download to. Hopefully once you have run the above you will see the `hello.txt` file in your `PopGenBerlin` (or equivalent) folder.
- Note that the slash direction differs between Windows and Linux. Once your are on the server, the direction changes!



##Mac/linux users

- Open up a second terminal (in your first terminal, press cmd+n), and navigate to your PopGenBerlin (or equivalent) folder, in which your .pem file is stored. Once you are there, type and adapt the following. You will need to change the username physaliaXX@ec2-etc. to your own username, and the daily-changing address that we have sent you. 

```{R,eval = F}
scp -r -i physaliaXX.pem physaliaXX@ec2-xx-xxx-xx-xxx.us-west-2.
compute.amazonaws.com:~/hello_folder/hello.txt
```

- `scp` expects three arguments, in the correct order. i) the .pem key file (after the option "-i"), ii) the address that you wish to download from, and iii) the address that you wish to download to (here our current directory, so a full stop). Hopefully once you have run the above you will see the `hello.txt` file in your `PopGenBerlin` (or equivalent) folder.


##Everyone again

- Go back to the amazon server and remove the hello_folder you've just made.

```{R eval = F}
rm -r hello_folder
```
